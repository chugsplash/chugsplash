TODO(md-client): current limitation: doesn't work with externally linked libraries. (right?)


TODO(md-client): COPIED FROM `cli-quickstart.md`:

TODO(md-client): this guide says "clients" a lot, but there's only one client now, right?

To improve the UX of CREATE3 deployments, Sphinx autogenerates **clients**, which are thin wrappers over your contracts that provide type safety for your constructor arguments. You'll need to use clients when deploying your contracts.

Generate the clients with the command:

```
npx sphinx generate
```

This command writes the clients into a new `client` folder.

If you change the interface of one of your contract's constructors, you'll also need to re-run the `generate` command.

## 6. Update your build command (optional)

Follow this step if you plan to use a build command to compile your contracts (e.g. `yarn build`). Otherwise, skip to the next step.

You'll need to generate the Sphinx clients in your build command or else the compilation process will fail.

Copy and paste the following into your `package.json`:
```json
{
  "scripts": {
    "build": "npx sphinx generate"
  }
}
```

You can use the `sphinx generate` command as a drop-in replacement for `forge build`, since it runs this command under the hood. TODO(md-client): perhaps mention that if the user needs to run `forge build` with extra args, they should put it after the `sphinx generate` command.



TODO(md-client): COPIED FROM `cli-existing-project.md`:

Add the following to your `.gitignore` file:
```
client/
```

## 8. Generate the Sphinx clients

Sphinx currently only supports CREATE3 deployments.

To improve the UX of CREATE3 deployments, Sphinx autogenerates **clients**, which are thin wrappers over your contracts that provide type safety for your constructor arguments. You'll need to use clients when deploying your contracts.

```
npx sphinx generate
```

This command writes the clients into a new `client` folder.

If you change the interface of one of your contract's constructors, you'll also need to re-run the `generate` command.

## 9. Update your build command (optional)

Follow this step if you use a build command to compile your contracts (e.g. `yarn build`). Otherwise, skip to the next step.

You'll need to generate the Sphinx clients in your build command, or else the compilation process will fail.

Open your `package.json`, then navigate to the `"build"` field, which is located in the following location:
```json
{
  "scripts": {
    "build": ...
  }
}
```

Then, copy and paste `npx sphinx generate` into your build command. You can use this as a drop-in replacement for `forge build`, since it runs this command under the hood.



TODO(md-client): COPIED FROM `writing-scripts.md`:

## Deploying Contracts
To deploy a contract using Sphinx, you'll need to use slightly different syntax compared to a standard deployment. Instead of using the `new` keyword (e.g. `new MyContract(...)`), you'll need to call a deployment function provided by Sphinx.

For example, say you have a contract called `HelloSphinx` that you'd normally deploy via `new HelloSphinx("Hello!", 2)`. Using Sphinx, you'd deploy this contract by calling the function:

```
deployHelloSphinx("Hello!", 2);
```

Sphinx autogenerates a deployment function like this for each of your contracts. These autogenerated functions exist in your `SphinxClient` contract, which is inherited by your script. There is one deployment function per contract.

You can generate your client using:
```
npx sphinx generate
```

Typically, the deployment function for a contract will follow the format: `deploy<ContractName>`. If your repository contains more than one contract with the same name, Sphinx will resolve this ambiguity by using the full path to the contract with the format: `deploy<PathToContract>_<ContractName>`. For example, say your repository contains more than one contract with the name `ERC20`. If one of these contracts is located at `src/tokens/MyTokens.sol`, then its deployment function would be called: `deploySrcTokensMyTokens_ERC20`.

### Contract Deployment Options

Sometimes, it may be necessary to configure additional options when deploying contracts using Sphinx. For example, you may want to use a custom salt to determine your contract's CREATE3 address, or you may want to deploy multiple instances of the same contract. You can do this by entering a `DeployOptions` struct as the last argument of the appropriate deployment function. The structure of the `DeployOptions` struct is:

```sol
struct DeployOptions {
    string referenceName;
    bytes32 salt;
}
```

The fields of the `DeployOptions` struct are explained in detail below. Note that changing either of these fields will result in your contract having a different CREATE3 address.

#### Reference Name

A string label for the contract. The reference name is displayed in the deployment preview, website UI, etc. By default, the reference name is the name of the contract being deployed. It determines a contract's address along with the `salt`.

We recommend specifying the reference name when you want to deploy multiple instances of the same contract in the same deployment. For example, if you want to deploy two instances of `MyContract`, where one is called "MyFirstContract" and the other is called "MySecondContract", you can write:

```sol
deployMyContract(..., DeployOptions({ referenceName: "MyFirstContract", salt: bytes32(0) }));
deployMyContract(..., DeployOptions({ referenceName: "MySecondContract", salt: bytes32(0) }));
```

#### Salt

A `bytes32` salt value. Along with the reference name, the `salt` determines a contract's `CREATE3` address. The salt is `bytes32(0)` by default. We recommend changing the salt when you need to re-deploy a contract to a new address. Example usage:

```sol
deployMyContract(..., DeployOptions({ referenceName: "MyContract", salt: bytes32(123) }));
```
